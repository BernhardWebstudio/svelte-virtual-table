var bt=Object.defineProperty;var Ye=t=>{throw TypeError(t)};var pt=(t,e,r)=>e in t?bt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var ze=(t,e,r)=>pt(t,typeof e!="symbol"?e+"":e,r),ke=(t,e,r)=>e.has(t)||Ye("Cannot "+r);var $=(t,e,r)=>(ke(t,e,"read from private field"),r?r.call(t):e.get(t)),me=(t,e,r)=>e.has(t)?Ye("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),Ce=(t,e,r,s)=>(ke(t,e,"write to private field"),s?s.call(t,r):e.set(t,r),r),Fe=(t,e,r)=>(ke(t,e,"access private method"),r);import{t as ae,a as Z,c as wt,d as xt}from"../chunks/XwmG38ir.js";import{an as st,b as ot,h as B,I as nt,ao as Tt,ai as Ke,ap as Te,aq as ye,w as We,a as he,q as Nt,c as de,_ as Xe,Z as Ze,ar as Je,e as yt,ag as pe,ah as Ne,aj as At,J as Ie,D as Et,C as St,o as a,m as kt,ae as Ct,af as Qe,a7 as Me,a8 as It,ac as lt,a1 as Mt,as as He,G as je,at as Ht,au as Bt,ab as Lt,av as Dt,d as Rt,aw as qt,ax as Ot,a5 as Ut,ay as Wt,az as Vt,aA as Gt,aB as Pt,aC as Yt,g as it,r as zt,i as Ft,R as ut,ak as H,t as ft,am as Ve,u as Kt,al as $e,v as k,W as E,n as ce,X as y,Y as D,U as be,V as dt,f as Ge,aD as Xt}from"../chunks/CRAC5efH.js";import{a as Zt,l as Jt,e as Qt,s as q}from"../chunks/2Gio7Tfq.js";import{s as Be}from"../chunks/jupETtXt.js";import{p as fe,b as Le}from"../chunks/xuFDhggh.js";import{o as jt}from"../chunks/DfHVFFlR.js";const De=0,xe=1,Re=2;function $t(t,e,r,s,o){B&&nt();var n=t,d=st(),_=yt,b=Ke,p,i,c,u=(d?ye:We)(void 0),h=(d?ye:We)(void 0),g=!1;function w(f,m){g=!0,m&&(Xe(x),Ze(x),Je(_));try{f===De&&r&&(p?pe(p):p=he(()=>r(n))),f===xe&&s&&(i?pe(i):i=he(()=>s(n,u))),f===Re&&o&&(c?pe(c):c=he(()=>o(n,h))),f!==De&&p&&Ne(p,()=>p=null),f!==xe&&i&&Ne(i,()=>i=null),f!==Re&&c&&Ne(c,()=>c=null)}finally{m&&(Je(null),Ze(null),Xe(null),At())}}var x=ot(()=>{if(b!==(b=e())){if(Tt(b)){var f=b;g=!1,f.then(m=>{f===b&&(Te(u,m),w(xe,!0))},m=>{if(f===b&&(Te(h,m),w(Re,!0),!o))throw h.v}),B?r&&(p=he(()=>r(n))):Nt(()=>{g||w(De,!0)})}else Te(u,b),w(xe,!1);return()=>b=Ke}});B&&(n=de)}function er(t,e){return e}function tr(t,e,r,s){for(var o=[],n=e.length,d=0;d<n;d++)Bt(e[d].e,o,!0);var _=n>0&&o.length===0&&r!==null;if(_){var b=r.parentNode;Lt(b),b.append(r),s.clear(),te(t,e[0].prev,e[n-1].next)}Dt(o,()=>{for(var p=0;p<n;p++){var i=e[p];_||(s.delete(i.k),te(t,i.prev,i.next)),Rt(i.e,!_)}})}function rr(t,e,r,s,o,n=null){var d=t,_={flags:e,items:new Map,first:null};{var b=t;d=B?Ie(Et(b)):b.appendChild(St())}B&&nt();var p=null,i=!1,c=kt(()=>{var u=r();return Mt(u)?u:u==null?[]:lt(u)});ot(()=>{var u=a(c),h=u.length;if(i&&h===0)return;i=h===0;let g=!1;if(B){var w=d.data===Ct;w!==(h===0)&&(d=Qe(),Ie(d),Me(!1),g=!0)}if(B){for(var x=null,f,m=0;m<h;m++){if(de.nodeType===8&&de.data===It){d=de,g=!0,Me(!1);break}var P=u[m],C=s(P,m);f=ht(de,_,x,null,P,C,m,o,e,r),_.items.set(C,f),x=f}h>0&&Ie(Qe())}B||ar(u,_,d,o,e,s,r),n!==null&&(h===0?p?pe(p):p=he(()=>n(d)):p!==null&&Ne(p,()=>{p=null})),g&&Me(!0),a(c)}),B&&(d=de)}function ar(t,e,r,s,o,n,d){var _=t.length,b=e.items,p=e.first,i=p,c,u=null,h=[],g=[],w,x,f,m;for(m=0;m<_;m+=1){if(w=t[m],x=n(w,m),f=b.get(x),f===void 0){var P=i?i.e.nodes_start:r;u=ht(P,e,u,u===null?e.first:u.next,w,x,m,s,o,d),b.set(x,u),h=[],g=[],i=u.next;continue}if(sr(f,w,m),(f.e.f&He)!==0&&pe(f.e),f!==i){if(c!==void 0&&c.has(f)){if(h.length<g.length){var C=g[0],I;u=C.prev;var Y=h[0],V=h[h.length-1];for(I=0;I<h.length;I+=1)et(h[I],C,r);for(I=0;I<g.length;I+=1)c.delete(g[I]);te(e,Y.prev,V.next),te(e,u,Y),te(e,V,C),i=C,u=V,m-=1,h=[],g=[]}else c.delete(f),et(f,i,r),te(e,f.prev,f.next),te(e,f,u===null?e.first:u.next),te(e,u,f),u=f;continue}for(h=[],g=[];i!==null&&i.k!==x;)(i.e.f&He)===0&&(c??(c=new Set)).add(i),g.push(i),i=i.next;if(i===null)continue;f=i}h.push(f),u=f,i=f.next}if(i!==null||c!==void 0){for(var K=c===void 0?[]:lt(c);i!==null;)(i.e.f&He)===0&&K.push(i),i=i.next;var G=K.length;if(G>0){var _e=_===0?r:null;tr(e,K,_e,b)}}je.first=e.first&&e.first.e,je.last=u&&u.e}function sr(t,e,r,s){Te(t.v,e),t.i=r}function ht(t,e,r,s,o,n,d,_,b,p){var i=(b&qt)!==0,c=(b&Ot)===0,u=i?c?We(o):ye(o):o,h=(b&Ht)===0?d:ye(d),g={i:h,v:u,k:n,a:null,e:null,prev:r,next:s};try{return g.e=he(()=>_(t,u,h,p),B),g.e.prev=r&&r.e,g.e.next=s&&s.e,r===null?e.first=g:(r.next=g,r.e.next=g.e),s!==null&&(s.prev=g,s.e.prev=g.e),g}finally{}}function et(t,e,r){for(var s=t.next?t.next.e.nodes_start:r,o=e?e.e.nodes_start:r,n=t.e.nodes_start;n!==s;){var d=Ut(n);o.before(n),n=d}}function te(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}const tt=[...` 	
\r\f \v\uFEFF`];function or(t,e,r){var s=t==null?"":""+t;if(s=s?s+" "+e:e,r){for(var o in r)if(r[o])s=s?s+" "+o:o;else if(s.length)for(var n=o.length,d=0;(d=s.indexOf(o,d))>=0;){var _=d+n;(d===0||tt.includes(s[d-1]))&&(_===s.length||tt.includes(s[_]))?s=(d===0?"":s.substring(0,d))+s.substring(_+1):d=_}}return s===""?null:s}function nr(t,e){return t==null?null:String(t)}function lr(t,e,r,s,o,n){var d=t.__className;if(B||d!==r||d===void 0){var _=or(r,s,n);(!B||_!==t.getAttribute("class"))&&(_==null?t.removeAttribute("class"):t.className=_),t.__className=r}else if(n&&o!==n)for(var b in n){var p=!!n[b];(o==null||p!==!!o[b])&&t.classList.toggle(b,p)}return n}function ir(t,e,r,s){var o=t.__style;if(B||o!==e){var n=nr(e);(!B||n!==t.getAttribute("style"))&&(n==null?t.removeAttribute("style"):t.style.cssText=n),t.__style=e}return s}const ur=Symbol("is custom element"),fr=Symbol("is html");function dr(t){if(B){var e=!1,r=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var s=t.value;Ae(t,"value",null),t.value=s}if(t.hasAttribute("checked")){var o=t.checked;Ae(t,"checked",null),t.checked=o}}};t.__on_r=r,Wt(r),Zt()}}function Ae(t,e,r,s){var o=hr(t);B&&(o[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||o[e]!==(o[e]=r)&&(e==="loading"&&(t[Pt]=r),r==null?t.removeAttribute(e):typeof r!="string"&&cr(t).includes(e)?t[e]=r:t.setAttribute(e,r))}function hr(t){return t.__attributes??(t.__attributes={[ur]:t.nodeName.includes("-"),[fr]:t.namespaceURI===Vt})}var rt=new Map;function cr(t){var e=rt.get(t.nodeName);if(e)return e;rt.set(t.nodeName,e=[]);for(var r,s=t,o=Element.prototype;o!==s;){r=Yt(s);for(var n in r)r[n].set&&e.push(n);s=Gt(s)}return e}function vr(t,e,r=e){var s=st();Jt(t,"input",o=>{var n=o?t.defaultValue:t.value;if(n=qe(t)?Oe(n):n,r(n),s&&n!==(n=e())){var d=t.selectionStart,_=t.selectionEnd;t.value=n??"",_!==null&&(t.selectionStart=d,t.selectionEnd=Math.min(_,t.value.length))}}),(B&&t.defaultValue!==t.value||it(e)==null&&t.value)&&r(qe(t)?Oe(t.value):t.value),zt(()=>{var o=e();qe(t)&&o===Oe(t.value)||t.type==="date"&&!o&&!t.value||o!==t.value&&(t.value=o??"")})}function qe(t){var e=t.type;return e==="number"||e==="range"}function Oe(t){return t===""?null:+t}var re,ve,we,Ee,ct;const Se=class Se{constructor(e){me(this,Ee);me(this,re,new WeakMap);me(this,ve);me(this,we);Ce(this,we,e)}observe(e,r){var s=$(this,re).get(e)||new Set;return s.add(r),$(this,re).set(e,s),Fe(this,Ee,ct).call(this).observe(e,$(this,we)),()=>{var o=$(this,re).get(e);o.delete(r),o.size===0&&($(this,re).delete(e),$(this,ve).unobserve(e))}}};re=new WeakMap,ve=new WeakMap,we=new WeakMap,Ee=new WeakSet,ct=function(){return $(this,ve)??Ce(this,ve,new ResizeObserver(e=>{for(var r of e){Se.entries.set(r.target,r);for(var s of $(this,re).get(r.target)||[])s(r)}}))},ze(Se,"entries",new WeakMap);let Pe=Se;var _r=new Pe({box:"border-box"});function Ue(t,e,r){var s=_r.observe(t,()=>r(t[e]));Ft(()=>(it(()=>r(t[e])),s))}var gr=ae('<svelte-virtual-table-viewport><table role="table"><thead class="thead svelte-1h7q17o" role="rowheader"><!></thead><tbody class="tbody svelte-1h7q17o" role="rowgroup"></tbody><tfoot class="tfoot svelte-1h7q17o" role="rowgroup"><!></tfoot></table></svelte-virtual-table-viewport>',2);function at(t,e){ut(e,!0);const r=!1,s="tablesort",o="sortable",n="ascending",d="descending";let _=fe(e,"requireBorderCollapse",3,!1),b=fe(e,"className",3,""),p=fe(e,"height",3,"100%"),i=fe(e,"itemHeight",3,void 0),c=fe(e,"start",15),u=fe(e,"end",15),h=H(void 0),g=H(0),w=H(void 0),x=H(0),f=H(0),m=ft([]),P=H(void 0),C=H(void 0),I=H(void 0),Y=H(0),V=H(void 0),K=H(0),G=Ve(()=>(console.log("Deriving sorted items"),se([...e.items],T))),_e=Ve(()=>(console.log("Deriving visible items",[c(),u()]),a(G).slice(c(),u()).map((l,v)=>({index:v+c(),data:l}))));Kt(()=>{e.items&&a(P)&&(console.log("Refreshing height map for "+e.items.length+" items"),M(e.items,a(K),i()))});async function M(l,v,N){const{scrollTop:L}=a(V);await $e();let S=a(Y)-(L-a(x)),U=c();for(;S<v-a(x)&&U<l.length;){let W=a(C)[U-c()];W||(u(U+1),await $e(),W=a(C)[U-c()]);const R=m[U]=N||W.getBoundingClientRect().height;S+=R,U+=1}u(U);const j=l.length-u();k(h,(a(Y)+S)/u()),k(g,j*a(h)+a(f)),m.length=l.length,await z(0,{behavior:"auto"})}function A(l,v,N){const L=getComputedStyle(l,v);return parseInt(L[N])}async function le(){k(C,a(w).children,!0);const l=a(G).length<c(),v=A(a(C)[1],null,"border-bottom-width"),N=A(a(C)[1],null,"border-top-width"),L=A(a(I),null,"border-top-width"),S=A(a(I),null,"border-bottom-width"),U=_()?Math.max(v,N):0;l&&await z(a(G).length-1,{behavior:"auto"});const{scrollTop:j}=a(V);let W=0;for(let X=0;X<a(C).length;X+=1)m[c()+X]=i()||a(C)[X].getBoundingClientRect().height;let R=0,ue=a(x)+N/2,_t=[];for(;R<a(G).length;){const X=m[R]||a(h);if(_t[R]=X,ue+X+U>j){W=R,k(Y,ue-(_()?(S+L)/2:a(x)+N/2));break}ue+=X,R+=1}for(W=Math.max(0,W);R<a(G).length;){const X=m[R]||a(h);if(ue+=X,R+=1,ue>j+a(K))break}c(W),u(R);const gt=a(G).length-u();u()-c()<5&&u(Math.min(c()+5,a(G).length-1)),k(h,ue/u());let mt=gt*a(h);for(;R<a(G).length;)R+=1,m[R]=a(h);k(g,mt),isFinite(a(g))||k(g,2e5)}async function z(l,v){const{scrollTop:N}=a(V),L=l-c(),S=i()||a(h),U=L*S;v={left:0,top:N+U,behavior:"smooth",...v},a(V).scrollTo(v)}let T=[[]];const se=function(l,v){return l.sort((N,L)=>{for(let[S,U]of v){const j=U===0?1:-1;if(S in L&&!(S in N))return-1*j;if(!(S in L)&&S in N)return 1*j;let W=0;if(typeof N[S]=="string"?W=j*N[S].localeCompare(L[S]):N[S]!=L[S]&&(W=j*(N[S]>L[S]?1:-1)),W)return W}return 0}),l};function oe(l,v){const N=l.dataset.sort;console.log("updateSortOrder",N,v,T),v?T[T.length-1][0]===N?T[T.length-1]=[N,(T[T.length-1][1]+1)%2]:T=[...T,[N,0]]:T.length===1&&T[0][0]===N?T[0]=[N,(T[0][1]+1)%2]:(ne(),T=[[N,0]]),l.className=o+" "+(T[T.length-1][1]?d:n)}function ne(){const l=a(I).getElementsByTagName("th");for(let v=0;v<l.length;v++)l[v].dataset.sort&&(l[v].className=o)}jt(()=>{k(C,a(w).children,!0),k(P,!0),M(e.items,a(K),i());const l=a(I).getElementsByTagName("th");for(let v=0;v<l.length;v++)l[v].dataset.sort&&(l[v].className=o,l[v].onclick=N=>oe(l[v],N.shiftKey)),l[v].dataset.sortInitial==="descending"?(l[v].className=o+" "+d,T=[...T,[l[v].dataset.sort,1]]):l[v].dataset.sortInitial!=null&&(l[v].className=o+" "+n,T=[...T,[l[v].dataset.sort,0]])});var J=gr(),O=E(J);let ee;var F=E(O),ie=E(F);Be(ie,()=>e.thead??ce),y(F),Le(F,l=>k(I,l),()=>a(I));var Q=D(F);rr(Q,21,()=>a(_e),er,(l,v,N)=>{var L=wt(),S=Ge(L);Be(S,()=>e.trow??ce,()=>a(v).data,()=>a(v).index,()=>N),Z(l,L)}),y(Q),Le(Q,l=>k(w,l),()=>a(w));var ge=D(Q),vt=E(ge);return Be(vt,()=>e.tfoot??ce),y(ge),y(O),Le(O,l=>k(V,l),()=>a(V)),y(J),be(l=>{ee=lr(O,1,`${s}
        ${b()??""} table`,"svelte-1h7q17o",ee,l),ir(O,`height: ${p()??""}; --bw-svt-p-top: ${a(Y)??""}px; --bw-svt-p-bottom: ${a(g)??""}px; --bw-svt-head-height: ${a(x)??""}px; --bw-svt-foot-height: ${a(f)??""}px; --bw-svt-avg-row-height: ${a(h)??""}px`)},[()=>({"require-border-collapse":_()})]),Qt("scroll",O,le),Ue(F,"offsetHeight",l=>k(x,l)),Ue(ge,"offsetHeight",l=>k(f,l)),Ue(O,"offsetHeight",l=>k(K,l)),Z(t,J),dt({ssr:r,scrollToIndex:z})}var mr=ae('<tr><th data-sort="title">Title</th><th data-sort="user">User</th><th data-sort="domain">Domain</th><th data-sort="time" data-sort-initial="descending">Time ago</th><th data-sort="comments_count">Comments</th></tr>'),br=ae('<tr class="tr"><td class="td svelte-1ko2uhx"><a target="_blank"> </a></td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td></tr>'),pr=ae('<tr><th data-sort="title">Title</th><th data-sort="user">User</th><th data-sort="domain">Domain</th><th data-sort="time" data-sort-initial="descending">Time ago</th><th data-sort="comments_count">Comments</th></tr>'),wr=ae('<tr class="tr"><td class="td svelte-1ko2uhx"><a target="_blank"> </a></td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td></tr>'),xr=ae("<p> </p> <h3>Without border-collapse:</h3> <p> </p> <!> <h3>With border-collapse:</h3> <p> </p> <!>",1),Tr=ae('<p style="color: red"> </p>'),Nr=ae(`<h1>Virtual Table Test</h1> <p>This is an example-project for the Svelte Virtual (Sortable) Table component. Checkout the source
	on <a href="https://github.com/BernhardWebstudio/svelte-virtual-table">GitHub</a>. The table's
	example content is loaded from HackerNews — all rights reserved. The author has no association
	with Svelte or Hacker News and is not liable and/or otherwise responsible for any of the contents
	in these tables.</p> Filter: <input> <!> <p>Thanks for checking out this Demo. Refer to the <a href="https://github.com/BernhardWebstudio/svelte-virtual-table#readme">README</a> of the original project on how to use this component and the <a href="https://github.com/BernhardWebstudio/svelte-virtual-table/issues">GitHub-project</a> in general
	for known issues.</p>`,1);function Mr(t,e){ut(e,!0);const r=!1;let s=H(ft([]));async function o(){let w=[];for(let x=1;x<5;x++){let m=await(await fetch(`https://node-hnapi.herokuapp.com/news?page=${x}`)).json();w=w.concat(m)}return k(s,w,!0),a(s)}const n=o();let d=H(""),_=Ve(()=>a(s).filter(w=>w.title.toUpperCase().indexOf(a(d).toUpperCase())!==-1)),b=H(0),p=H(0),i=H(10),c=H(10);var u=Nr(),h=D(Ge(u),4);dr(h);var g=D(h,2);return $t(g,()=>n,w=>{var x=xt("Loading...");Z(w,x)},w=>{var x=xr(),f=Ge(x),m=E(f);y(f);var P=D(f,4),C=E(P);y(P);var I=D(P,2);at(I,{get items(){return a(_)},class:"test1 test2",get start(){return a(b)},set start(M){k(b,M,!0)},get end(){return a(i)},set end(M){k(i,M,!0)},thead:M=>{var A=mr();Z(M,A)},trow:(M,A=ce,le=ce)=>{var z=br(),T=E(z),se=E(T),oe=E(se,!0);y(se),y(T);var ne=D(T),J=E(ne,!0);y(ne);var O=D(ne),ee=E(O,!0);y(O);var F=D(O),ie=E(F,!0);y(F);var Q=D(F),ge=E(Q,!0);y(Q),y(z),be(()=>{Ae(se,"href",A().url),q(oe,A().title),q(J,A().user),q(ee,A().domain),q(ie,A().time_ago),q(ge,A().comments_count)}),Z(M,z)},$$slots:{thead:!0,trow:!0}});var Y=D(I,4),V=E(Y);y(Y);var K=D(Y,2);at(K,{get items(){return a(_)},class:"test1 test2",requireBorderCollapse:"true",get start(){return a(p)},set start(M){k(p,M,!0)},get end(){return a(c)},set end(M){k(c,M,!0)},thead:M=>{var A=pr();Z(M,A)},trow:(M,A=ce)=>{var le=wr(),z=E(le),T=E(z),se=E(T,!0);y(T),y(z);var oe=D(z),ne=E(oe,!0);y(oe);var J=D(oe),O=E(J,!0);y(J);var ee=D(J),F=E(ee,!0);y(ee);var ie=D(ee),Q=E(ie,!0);y(ie),y(le),be(()=>{Ae(T,"href",A().url),q(se,A().title),q(ne,A().user),q(O,A().domain),q(F,A().time_ago),q(Q,A().comments_count)}),Z(M,le)},$$slots:{thead:!0,trow:!0}}),be(()=>{q(m,`Loaded ${a(_).length??""} items.`),q(C,`Start: ${a(b)??""}, end: ${a(i)??""}`),q(V,`Start: ${a(p)??""}, end: ${a(c)??""}`)}),Z(w,x)},(w,x)=>{var f=Tr(),m=E(f,!0);y(f),be(()=>q(m,a(x).message)),Z(w,f)}),Xt(2),vr(h,()=>a(d),w=>k(d,w)),Z(t,u),dt({ssr:r})}export{Mr as component};
