var gt=Object.defineProperty;var Pe=t=>{throw TypeError(t)};var mt=(t,e,a)=>e in t?gt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a;var Ye=(t,e,a)=>mt(t,typeof e!="symbol"?e+"":e,a),Se=(t,e,a)=>e.has(t)||Pe("Cannot "+a);var $=(t,e,a)=>(Se(t,e,"read from private field"),a?a.call(t):e.get(t)),me=(t,e,a)=>e.has(t)?Pe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,a),Be=(t,e,a,o)=>(Se(t,e,"write to private field"),o?o.call(t,a):e.set(t,a),a),Fe=(t,e,a)=>(Se(t,e,"access private method"),a);import{t as se,a as X,c as pt,d as bt}from"../chunks/Bld5l0Cy.js";import{ar as st,b as ot,h as D,Q as nt,as as wt,U as Qe,at as ye,s as Ne,D as Ve,a as ce,y as xt,c as he,a5 as Xe,a4 as Ze,au as Je,e as kt,am as be,an as Te,ao as yt,R as He,M as Tt,K as Nt,k as r,B as At,ak as Et,al as je,ad as Ie,ae as Ct,ai as lt,v as St,av as Me,q as $e,aw as Bt,ax as Ht,ah as It,ay as Mt,d as Lt,az as Dt,aA as qt,ab as Rt,aB as Ot,aC as Wt,t as Ut,aD as Vt,g as it,x as Gt,w as zt,_ as dt,u as Kt,ap as I,aq as et,m as C,a1 as A,n as ve,a2 as T,a3 as L,$ as pe,a0 as ft,f as Ge,A as ze,aE as Pt}from"../chunks/CJlrEtdq.js";import{a as Yt,l as Ft,e as Qt,s as O}from"../chunks/ClFtIT6O.js";import{p as ue,a as ee,b as Le}from"../chunks/hKSkgPLM.js";import{s as De}from"../chunks/BV4ll-iM.js";import{o as Xt}from"../chunks/BYrt5obT.js";const qe=0,ke=1,Re=2;function Zt(t,e,a,o,s){D&&nt();var f=t,g=st(),y=kt,w=Qe,x,n,h,l=(g?Ne:Ve)(void 0),u=(g?Ne:Ve)(void 0),v=!1;function m(d,_){v=!0,_&&(Xe(p),Ze(p),Je(y));try{d===qe&&a&&(x?be(x):x=ce(()=>a(f))),d===ke&&o&&(n?be(n):n=ce(()=>o(f,l))),d===Re&&s&&(h?be(h):h=ce(()=>s(f,u))),d!==qe&&x&&Te(x,()=>x=null),d!==ke&&n&&Te(n,()=>n=null),d!==Re&&h&&Te(h,()=>h=null)}finally{_&&(Je(null),Ze(null),Xe(null),yt())}}var p=ot(()=>{if(w!==(w=e())){if(wt(w)){var d=w;v=!1,d.then(_=>{d===w&&(ye(l,_),m(ke,!0))},_=>{if(d===w&&(ye(u,_),m(Re,!0),!s))throw u.v}),D?a&&(x=ce(()=>a(f))):xt(()=>{v||m(qe,!0)})}else ye(l,w),m(ke,!1);return()=>w=Qe}});D&&(f=he)}function Jt(t,e){return e}function jt(t,e,a,o){for(var s=[],f=e.length,g=0;g<f;g++)Ht(e[g].e,s,!0);var y=f>0&&s.length===0&&a!==null;if(y){var w=a.parentNode;It(w),w.append(a),o.clear(),ae(t,e[0].prev,e[f-1].next)}Mt(s,()=>{for(var x=0;x<f;x++){var n=e[x];y||(o.delete(n.k),ae(t,n.prev,n.next)),Lt(n.e,!y)}})}function $t(t,e,a,o,s,f=null){var g=t,y={items:new Map,first:null};{var w=t;g=D?He(Tt(w)):w.appendChild(Nt())}D&&nt();var x=null,n=!1,h=At(()=>{var l=a();return St(l)?l:l==null?[]:lt(l)});ot(()=>{var l=r(h),u=l.length;if(n&&u===0)return;n=u===0;let v=!1;if(D){var m=g.data===Et;m!==(u===0)&&(g=je(),He(g),Ie(!1),v=!0)}if(D){for(var p=null,d,_=0;_<u;_++){if(he.nodeType===8&&he.data===Ct){g=he,v=!0,Ie(!1);break}var z=l[_],S=o(z,_);d=ut(he,y,p,null,z,S,_,s,e,a),y.items.set(S,d),p=d}u>0&&He(je())}D||ea(l,y,g,s,e,o,a),f!==null&&(u===0?x?be(x):x=ce(()=>f(g)):x!==null&&Te(x,()=>{x=null})),v&&Ie(!0),r(h)}),D&&(g=he)}function ea(t,e,a,o,s,f,g){var y=t.length,w=e.items,x=e.first,n=x,h,l=null,u=[],v=[],m,p,d,_;for(_=0;_<y;_+=1){if(m=t[_],p=f(m,_),d=w.get(p),d===void 0){var z=n?n.e.nodes_start:a;l=ut(z,e,l,l===null?e.first:l.next,m,p,_,o,s,g),w.set(p,l),u=[],v=[],n=l.next;continue}if(ta(d,m,_),d.e.f&Me&&be(d.e),d!==n){if(h!==void 0&&h.has(d)){if(u.length<v.length){var S=v[0],B;l=S.prev;var K=u[0],V=u[u.length-1];for(B=0;B<u.length;B+=1)tt(u[B],S,a);for(B=0;B<v.length;B+=1)h.delete(v[B]);ae(e,K.prev,V.next),ae(e,l,K),ae(e,V,S),n=S,l=V,_-=1,u=[],v=[]}else h.delete(d),tt(d,n,a),ae(e,d.prev,d.next),ae(e,d,l===null?e.first:l.next),ae(e,l,d),l=d;continue}for(u=[],v=[];n!==null&&n.k!==p;)n.e.f&Me||(h??(h=new Set)).add(n),v.push(n),n=n.next;if(n===null)continue;d=n}u.push(d),l=d,n=d.next}if(n!==null||h!==void 0){for(var F=h===void 0?[]:lt(h);n!==null;)n.e.f&Me||F.push(n),n=n.next;var G=F.length;if(G>0){var ge=y===0?a:null;jt(e,F,ge,w)}}$e.first=e.first&&e.first.e,$e.last=l&&l.e}function ta(t,e,a,o){ye(t.v,e),t.i=a}function ut(t,e,a,o,s,f,g,y,w,x){var n=(w&Dt)!==0,h=(w&qt)===0,l=n?h?Ve(s):Ne(s):s,u=w&Bt?Ne(g):g,v={i:u,v:l,k:f,a:null,e:null,prev:a,next:o};try{return v.e=ce(()=>y(t,l,u,x),D),v.e.prev=a&&a.e,v.e.next=o&&o.e,a===null?e.first=v:(a.next=v,a.e.next=v.e),o!==null&&(o.prev=v,o.e.prev=v.e),v}finally{}}function tt(t,e,a){for(var o=t.next?t.next.e.nodes_start:a,s=e?e.e.nodes_start:a,f=t.e.nodes_start;f!==o;){var g=Rt(f);s.before(f),f=g}}function ae(t,e,a){e===null?t.first=a:(e.next=a,e.e.next=a&&a.e),a!==null&&(a.prev=e,a.e.prev=e&&e.e)}function aa(t){if(D){var e=!1,a=()=>{if(!e){if(e=!0,t.hasAttribute("value")){var o=t.value;we(t,"value",null),t.value=o}if(t.hasAttribute("checked")){var s=t.checked;we(t,"checked",null),t.checked=s}}};t.__on_r=a,Ot(a),Yt()}}function we(t,e,a,o){var s=t.__attributes??(t.__attributes={});D&&(s[e]=t.getAttribute(e),e==="src"||e==="srcset"||e==="href"&&t.nodeName==="LINK")||s[e]!==(s[e]=a)&&(e==="style"&&"__styles"in t&&(t.__styles={}),e==="loading"&&(t[Wt]=a),a==null?t.removeAttribute(e):typeof a!="string"&&ra(t).includes(e)?t[e]=a:t.setAttribute(e,a))}var at=new Map;function ra(t){var e=at.get(t.nodeName);if(e)return e;at.set(t.nodeName,e=[]);for(var a,o=t,s=Element.prototype;s!==o;){a=Vt(o);for(var f in a)a[f].set&&e.push(f);o=Ut(o)}return e}function sa(t,e,a){var o=t.__className,s=oa(e);D&&t.className===s?t.__className=s:(o!==s||D&&t.className!==s)&&(e==null?t.removeAttribute("class"):t.className=s,t.__className=s)}function oa(t,e){return(t??"")+""}function na(t,e,a){if(a){if(t.classList.contains(e))return;t.classList.add(e)}else{if(!t.classList.contains(e))return;t.classList.remove(e)}}function la(t,e,a=e){var o=st();Ft(t,"input",s=>{var f=s?t.defaultValue:t.value;if(f=Oe(t)?We(f):f,a(f),o&&f!==(f=e())){var g=t.selectionStart,y=t.selectionEnd;t.value=f??"",y!==null&&(t.selectionStart=g,t.selectionEnd=Math.min(y,t.value.length))}}),(D&&t.defaultValue!==t.value||it(e)==null&&t.value)&&a(Oe(t)?We(t.value):t.value),Gt(()=>{var s=e();Oe(t)&&s===We(t.value)||t.type==="date"&&!s&&!t.value||s!==t.value&&(t.value=s??"")})}function Oe(t){var e=t.type;return e==="number"||e==="range"}function We(t){return t===""?null:+t}var re,_e,xe,Ae,ht;const Ee=class Ee{constructor(e){me(this,Ae);me(this,re,new WeakMap);me(this,_e);me(this,xe);Be(this,xe,e)}observe(e,a){var o=$(this,re).get(e)||new Set;return o.add(a),$(this,re).set(e,o),Fe(this,Ae,ht).call(this).observe(e,$(this,xe)),()=>{var s=$(this,re).get(e);s.delete(a),s.size===0&&($(this,re).delete(e),$(this,_e).unobserve(e))}}};re=new WeakMap,_e=new WeakMap,xe=new WeakMap,Ae=new WeakSet,ht=function(){return $(this,_e)??Be(this,_e,new ResizeObserver(e=>{for(var a of e){Ee.entries.set(a.target,a);for(var o of $(this,re).get(a.target)||[])o(a)}}))},Ye(Ee,"entries",new WeakMap);let Ke=Ee;var ia=new Ke({box:"border-box"});function Ue(t,e,a){var o=ia.observe(t,()=>a(t[e]));zt(()=>(it(()=>a(t[e])),o))}var da=se('<svelte-virtual-table-viewport><table role="table"><thead class="thead svelte-1h7q17o" role="rowheader"><!></thead><tbody class="tbody svelte-1h7q17o" role="rowgroup"></tbody><tfoot class="tfoot svelte-1h7q17o" role="rowgroup"><!></tfoot></table></svelte-virtual-table-viewport>',2);function rt(t,e){dt(e,!0);const a=!1,o="tablesort",s="sortable",f="ascending",g="descending";let y=ue(e,"requireBorderCollapse",3,!1),w=ue(e,"className",3,""),x=ue(e,"height",3,"100%"),n=ue(e,"itemHeight",3,void 0),h=ue(e,"start",15),l=ue(e,"end",15),u=I(void 0),v=I(0),m=I(void 0),p=I(0),d=I(0),_=ee([]),z=I(void 0),S=I(void 0),B=I(void 0),K=I(0),V=I(void 0),F=I(0),G=ze(()=>(console.log("Deriving sorted items"),oe([...e.items],b))),ge=ze(()=>(console.log("Deriving visible items",[h(),l()]),r(G).slice(h(),l()).map((i,c)=>({index:c+h(),data:i}))));Kt(()=>{e.items&&r(z)&&(console.log("Refreshing height map for "+e.items.length+" items"),H(e.items,r(F),n()))});async function H(i,c,k){const{scrollTop:M}=r(V);await et();let E=r(K)-(M-r(p)),W=h();for(;E<c-r(p)&&W<i.length;){let U=r(S)[W-h()];U||(l(W+1),await et(),U=r(S)[W-h()]);const R=_[W]=k||U.getBoundingClientRect().height;E+=R,W+=1}l(W);const j=i.length-l();C(u,(r(K)+E)/l()),C(v,j*r(u)+r(d)),_.length=i.length,await P(0,{behavior:"auto"})}function N(i,c,k){const M=getComputedStyle(i,c);return parseInt(M[k])}async function de(){C(S,ee(r(m).children));const i=r(G).length<h(),c=N(r(S)[1],null,"border-bottom-width"),k=N(r(S)[1],null,"border-top-width"),M=N(r(B),null,"border-top-width"),E=N(r(B),null,"border-bottom-width"),W=y()?Math.max(c,k):0;i&&await P(r(G).length-1,{behavior:"auto"});const{scrollTop:j}=r(V);let U=0;for(let Q=0;Q<r(S).length;Q+=1)_[h()+Q]=n()||r(S)[Q].getBoundingClientRect().height;let R=0,fe=r(p)+k/2,ct=[];for(;R<r(G).length;){const Q=_[R]||r(u);if(ct[R]=Q,fe+Q+W>j){U=R,C(K,fe-(y()?(E+M)/2:r(p)+k/2));break}fe+=Q,R+=1}for(U=Math.max(0,U);R<r(G).length;){const Q=_[R]||r(u);if(fe+=Q,R+=1,fe>j+r(F))break}h(U),l(R);const vt=r(G).length-l();l()-h()<5&&l(Math.min(h()+5,r(G).length-1)),C(u,fe/l());let _t=vt*r(u);for(;R<r(G).length;)R+=1,_[R]=r(u);C(v,_t),isFinite(r(v))||C(v,2e5)}async function P(i,c){const{scrollTop:k}=r(V),M=i-h(),E=n()||r(u),W=M*E;c={left:0,top:k+W,behavior:"smooth",...c},r(V).scrollTo(c)}let b=[[]];const oe=function(i,c){return i.sort((k,M)=>{for(let[E,W]of c){const j=W===0?1:-1;if(E in M&&!(E in k))return-1*j;if(!(E in M)&&E in k)return 1*j;let U=0;if(typeof k[E]=="string"?U=j*k[E].localeCompare(M[E]):k[E]!=M[E]&&(U=j*(k[E]>M[E]?1:-1)),U)return U}return 0}),i};function ne(i,c){const k=i.dataset.sort;console.log("updateSortOrder",k,c,b),c?b[b.length-1][0]===k?b[b.length-1]=[k,(b[b.length-1][1]+1)%2]:b=[...b,[k,0]]:b.length===1&&b[0][0]===k?b[0]=[k,(b[0][1]+1)%2]:(le(),b=[[k,0]]),i.className=s+" "+(b[b.length-1][1]?g:f)}function le(){const i=r(B).getElementsByTagName("th");for(let c=0;c<i.length;c++)i[c].dataset.sort&&(i[c].className=s)}Xt(()=>{C(S,ee(r(m).children)),C(z,!0),H(e.items,r(F),n());const i=r(B).getElementsByTagName("th");for(let c=0;c<i.length;c++)i[c].dataset.sort&&(i[c].className=s,i[c].onclick=k=>ne(i[c],k.shiftKey)),i[c].dataset.sortInitial==="descending"?(i[c].className=s+" "+g,b=[...b,[i[c].dataset.sort,1]]):i[c].dataset.sortInitial!=null&&(i[c].className=s+" "+f,b=[...b,[i[c].dataset.sort,0]])});var Z=da(),q=A(Z),Y=A(q),ie=A(Y);De(ie,()=>e.thead??ve),T(Y),Le(Y,i=>C(B,i),()=>r(B));var J=L(Y);$t(J,21,()=>r(ge),Jt,(i,c,k)=>{var M=pt(),E=Ge(M);De(E,()=>e.trow??ve,()=>r(c).data,()=>r(c).index,()=>k),X(i,M)}),T(J),Le(J,i=>C(m,i),()=>r(m));var te=L(J),Ce=A(te);return De(Ce,()=>e.tfoot??ve),T(te),T(q),Le(q,i=>C(V,i),()=>r(V)),T(Z),pe(()=>{sa(q,`${o}
        ${w()??""} table svelte-1h7q17o`),we(q,"style",`height: ${x()??""}; --bw-svt-p-top: ${r(K)??""}px; --bw-svt-p-bottom: ${r(v)??""}px; --bw-svt-head-height: ${r(p)??""}px; --bw-svt-foot-height: ${r(d)??""}px; --bw-svt-avg-row-height: ${r(u)??""}px`),na(q,"require-border-collapse",y())}),Qt("scroll",q,de),Ue(Y,"offsetHeight",i=>C(p,i)),Ue(te,"offsetHeight",i=>C(d,i)),Ue(q,"offsetHeight",i=>C(F,i)),X(t,Z),ft({ssr:a,scrollToIndex:P})}var fa=se('<tr><th data-sort="title">Title</th><th data-sort="user">User</th><th data-sort="domain">Domain</th><th data-sort="time" data-sort-initial="descending">Time ago</th><th data-sort="comments_count">Comments</th></tr>'),ua=se('<tr class="tr"><td class="td svelte-1ko2uhx"><a target="_blank"> </a></td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td></tr>'),ha=se('<tr><th data-sort="title">Title</th><th data-sort="user">User</th><th data-sort="domain">Domain</th><th data-sort="time" data-sort-initial="descending">Time ago</th><th data-sort="comments_count">Comments</th></tr>'),ca=se('<tr class="tr"><td class="td svelte-1ko2uhx"><a target="_blank"> </a></td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td><td class="td svelte-1ko2uhx"> </td></tr>'),va=se("<p> </p> <h3>Without border-collapse:</h3> <p> </p> <!> <h3>With border-collapse:</h3> <p> </p> <!>",1),_a=se('<p style="color: red"> </p>'),ga=se(`<h1>Virtual Table Test</h1> <p>This is an example-project for the Svelte Virtual (Sortable) Table component. Checkout the source
	on <a href="https://github.com/BernhardWebstudio/svelte-virtual-table">GitHub</a>. The table's
	example content is loaded from HackerNews — all rights reserved. The author has no association
	with Svelte or Hacker News and is not liable and/or otherwise responsible for any of the contents
	in these tables.</p> Filter: <input> <!> <p>Thanks for checking out this Demo. Refer to the <a href="https://github.com/BernhardWebstudio/svelte-virtual-table#readme">README</a> of the original project on how to use this component and the <a href="https://github.com/BernhardWebstudio/svelte-virtual-table/issues">GitHub-project</a> in general
	for known issues.</p>`,1);function Ta(t,e){dt(e,!0);const a=!1;let o=I(ee([]));async function s(){let m=[];for(let p=1;p<5;p++){let _=await(await fetch(`https://node-hnapi.herokuapp.com/news?page=${p}`)).json();m=m.concat(_)}return C(o,ee(m)),r(o)}const f=s();let g=I(""),y=ze(()=>r(o).filter(m=>m.title.toUpperCase().indexOf(r(g).toUpperCase())!==-1)),w=I(0),x=I(0),n=I(10),h=I(10);var l=ga(),u=L(Ge(l),4);aa(u);var v=L(u,2);return Zt(v,()=>f,m=>{var p=bt("Loading...");X(m,p)},m=>{var p=va(),d=Ge(p),_=A(d);T(d);var z=L(d,4),S=A(z);T(z);var B=L(z,2);rt(B,{get items(){return r(y)},class:"test1 test2",get start(){return r(w)},set start(H){C(w,ee(H))},get end(){return r(n)},set end(H){C(n,ee(H))},thead:H=>{var N=fa();X(H,N)},trow:(H,N=ve,de=ve)=>{var P=ua(),b=A(P),oe=A(b),ne=A(oe,!0);T(oe),T(b);var le=L(b),Z=A(le,!0);T(le);var q=L(le),Y=A(q,!0);T(q);var ie=L(q),J=A(ie,!0);T(ie);var te=L(ie),Ce=A(te,!0);T(te),T(P),pe(()=>{we(oe,"href",N().url),O(ne,N().title),O(Z,N().user),O(Y,N().domain),O(J,N().time_ago),O(Ce,N().comments_count)}),X(H,P)},$$slots:{thead:!0,trow:!0}});var K=L(B,4),V=A(K);T(K);var F=L(K,2);rt(F,{get items(){return r(y)},class:"test1 test2",requireBorderCollapse:"true",get start(){return r(x)},set start(H){C(x,ee(H))},get end(){return r(h)},set end(H){C(h,ee(H))},thead:H=>{var N=ha();X(H,N)},trow:(H,N=ve)=>{var de=ca(),P=A(de),b=A(P),oe=A(b,!0);T(b),T(P);var ne=L(P),le=A(ne,!0);T(ne);var Z=L(ne),q=A(Z,!0);T(Z);var Y=L(Z),ie=A(Y,!0);T(Y);var J=L(Y),te=A(J,!0);T(J),T(de),pe(()=>{we(b,"href",N().url),O(oe,N().title),O(le,N().user),O(q,N().domain),O(ie,N().time_ago),O(te,N().comments_count)}),X(H,de)},$$slots:{thead:!0,trow:!0}}),pe(()=>{O(_,`Loaded ${r(y).length??""} items.`),O(S,`Start: ${r(w)??""}, end: ${r(n)??""}`),O(V,`Start: ${r(x)??""}, end: ${r(h)??""}`)}),X(m,p)},(m,p)=>{var d=_a(),_=A(d,!0);T(d),pe(()=>O(_,r(p).message)),X(m,d)}),Pt(2),la(u,()=>r(g),m=>C(g,m)),X(t,l),ft({ssr:a})}export{Ta as component};
